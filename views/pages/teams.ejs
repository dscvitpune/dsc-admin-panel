<!DOCTYPE html >
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/navigationbar.css">
    <link rel="stylesheet" href="css/projects.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Play&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oxygen:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="images/favicon.ico"/>
    <title>DSC Admin Panel</title></head>
<body  >
    
    <script src="js/navigationbar.js"></script>

  
    <div class="projectform">
           
        <div>
            <form method="POST", action="/team/newMember" enctype="multipart/form-data">
        <p  class="display-6 titl text-dark mb-4">Members Form</p>
        <div class="form mx-auto" id="formm">
           <div class="row">
               <div class="col">
                <div class="row resp">
                    <div class="col projtitle">
                        <label for="" class="form-label">Full Name </label>
                        <input type="text" name="fullname" class="form-control " required placeholder="">
                    </div>
                    <div class="col domain">
                        <label for="" class="form-label">Email</label>
                        <input type="email" name="email" class="form-control " required placeholder="">
                    </div>
                </div>
                <div>
                    <div class="row">
                        <div class="col">
                            <label for=""
                            class="form-label mt-3">GitHub</label>
                            <input type="url" name="githubProfile" class="form-control "
                            required placeholder="">
                        </div>
                        <div class="col">
                            <label for="" class="form-label mt-3">LinkedIn</label>
                            <input type="url" name="linkedInProfile" required class="form-control" placeholder="">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="row">
                        <div class="col">
                            <label for=""
                            class="form-label mt-3">Contact</label>
                            <input type="number" name="mobileNumber" required class="form-control"
                            placeholder="">
                        </div>
                        <div class="col">
                            <label for=""
    class="form-label mt-3">Role</label>
    <div class="dropdown">
    <select  id="selectOption" name="role"
    class="form-control bg-dark text-light text-center" required
    data-error="Please select ">
    <option>-- Select your Role --</option>
    <option value="Lead">DSC Lead</option>
    <option value="Head">Head</option>
    <option value="Manager">Manager</option>
    <option value="Senior Developer">Senior Developer</option>
    <option value="Junior Developer">Junior Developer</option>
    </select>
    <!-- refer projects.js for action on selecting the domain -->
    </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="row">
                        <div class="col">
                            <label for="" class="form-label mt-3">Position</label>
                            <input type="text" name="position" class="form-control " required placeholder="">
                        </div>
                        <div class="col">
                            <label for="" class="form-label mt-3">Year</label>
                            <input type="number" name="year" class="form-control " required placeholder="Eg. 2021">
                        </div>
                    </div>
                </div>
        </div>
        <div class="col-4 uploaddiv">
            <div class="demoimage h-100 text-center d-table" id="demoimg" onclick="imgupload();">
                <div class="uploadimg align-middle d-table-cell" >
                <img src="images/upload.png" width="60px" height="60px" alt="" >
                <p>Upload</p>
                <p class="txtmuted" style="font-size: 0.8rem;">Drag & Drop or Click to choose</p>
           
            <p id="chosenfile" class="text-muted" >No file Chosen</p>
            <!-- </div> -->
            </div>
            <input name="image" id="imgupload" hidden type="file"/>
        </div>
        
    </div>
    <div class="row mt-5 d-flex justify-content-center" >
        <button class="btn btn-dark addproj mb-2" type="submit">Add Member</button>
    </div>
    </div>
</div>
</form>

        </div>
        <p  class="display-6 titl text-dark mb-4">Teams</p>
        <div class="projectstable mt-5">
            <div class="tablesp">
            <table class="table-teams table table-bordered table-striped">
            <thead class="thead table-dark">
            <tr>
            <th style="width: 1.5%;">#</th>
            <th style="width:5%;">Name</th>
            <th style="width:5%;">Email</th>
            <th style="width:5%;">Mobile No.</th>
            <th style="width:6%;">Role</th>
            <th style="width:6%;">Position</th>
            <th style="width:4%;">Year</th>
            <th style="width:1%;">GitHub</th>
            <th style="width:0.5%;">LinkedIn</th>
            <th style="width:1%;">Controls</th>
            </tr>
            </thead>
            <tbody>
            <% allMembers.forEach((member, idx) => { %>
            <tr>
            <td><%= idx+1%></td>
            <td><%= member.fullname%></td>
            <td><%= member.email%></td>
            <td><%= member.mobileNumber%></td>
            <td><%= member.role%></td>
            <td><%= member.position%></td>
            <td><%= member.year%></td>
            <td><a target="_blank" href="<%= member.githubProfile%>" class="btn btn-link">Click Here</a></td>
            <td><a target="_blank" href="<%= member.linkedInProfile%>" class="btn btn-link">Click Here</a></td>
            <td class="tbuttons">
            <div class="t-buttons ">
            <button class="btn" onclick="editTeam(`<%= member._id%>`)" ><img src="images/pencil.png"></button>
            <button class="btn" onClick="handleDelete(`<%= member._id%>`)"><img src="images/trashbin.png"></button>
            </div>
            </td>
            </tr>
            <%}); %>
            </tbody>
            </table>
            </div>
            </div>
    </div>
    <script>
        const handleDelete = async(_id)=>{
        const id = {id:_id};
        let res = await fetch('/team/deleteMember',{
        method: 'POST',
        headers: {
        'Content-Type': 'application/json',
        },
        body:JSON.stringify(id),
        })
        console.log(res)
        location.reload();
        }
        
        const editTeam = (id)=>{
            window.location.href = `editMember/${id}`;        
        }
        </script>
        <script src="js/projects.js"></script>
        <%- include("../partials/scripts") %>
</body>
</html>